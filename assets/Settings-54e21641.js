import{w as f,v as n}from"./runtime-dom.esm-bundler-171ea4b6.js";import{u as g,d as u}from"./router-845927d8.js";import{e as b,P as _,a6 as h,f as w,c as U,a as t,a5 as i,u as x,o as y,k as S}from"./vue-router-3ca4787c.js";const v={class:"settings-page"},V={class:"container page"},k={class:"row"},B={class:"col-md-6 offset-md-3 col-xs-12"},C=t("h1",{class:"text-xs-center"}," Your Settings ",-1),D=["onSubmit"],M={class:"form-group"},P={class:"form-group"},E={class:"form-group"},L={class:"form-group"},N={class:"form-group"},O=["disabled"],Y=t("hr",null,null,-1),R=b({__name:"Settings",setup(j){const e=_({}),r=g(),m=async()=>{const a=Object.entries(e).reduce((o,[l,d])=>d===null?o:{...o,[l]:d},{}),s=await S.user.updateCurrentUser({user:a}).then(o=>o.data.user);r.updateUser(s),await u("profile",{username:s.username})},c=async()=>{r.updateUser(null),await u("global-feed")};h(async()=>{var a,s,o,l;if(!r.isAuthorized)return await u("login");e.image=(a=r.user)==null?void 0:a.image,e.username=(s=r.user)==null?void 0:s.username,e.bio=(o=r.user)==null?void 0:o.bio,e.email=(l=r.user)==null?void 0:l.email});const p=w(()=>{var a,s,o,l;return e.image===((a=r.user)==null?void 0:a.image)&&e.username===((s=r.user)==null?void 0:s.username)&&e.bio===((o=r.user)==null?void 0:o.bio)&&e.email===((l=r.user)==null?void 0:l.email)&&!e.password});return(a,s)=>(y(),U("div",v,[t("div",V,[t("div",k,[t("div",B,[C,t("form",{onSubmit:f(m,["prevent"])},[t("fieldset",null,[t("fieldset",M,[i(t("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>e.image=o),type:"text",class:"form-control",placeholder:"URL of profile picture"},null,512),[[n,e.image]])]),t("fieldset",P,[i(t("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>e.username=o),type:"text",class:"form-control form-control-lg",placeholder:"Your name"},null,512),[[n,e.username]])]),t("fieldset",E,[i(t("textarea",{"onUpdate:modelValue":s[2]||(s[2]=o=>e.bio=o),class:"form-control form-control-lg",rows:8,placeholder:"Short bio about you"},null,512),[[n,e.bio]])]),t("fieldset",L,[i(t("input",{"onUpdate:modelValue":s[3]||(s[3]=o=>e.email=o),type:"email",class:"form-control form-control-lg",placeholder:"Email"},null,512),[[n,e.email]])]),t("fieldset",N,[i(t("input",{"onUpdate:modelValue":s[4]||(s[4]=o=>e.password=o),type:"password",class:"form-control form-control-lg",placeholder:"New Password"},null,512),[[n,e.password]])]),t("button",{class:"btn btn-lg btn-primary pull-xs-right",disabled:x(p),type:"submit"}," Update Settings ",8,O)])],40,D),Y,t("button",{class:"btn btn-outline-danger",onClick:c}," Or click here to logout. ")])])])]))}});export{R as default};
