var Se=Object.defineProperty;var Pe=(e,t,s)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var Q=(e,t,s)=>(Pe(e,typeof t!="symbol"?t+"":t,s),s);import{H as ie,I as w,J as q,K as ue,L as z,M as te,N as Ee,O,P as $e,Q as Le,R as Te,S as Ce,T as Fe,U as Re,V as fe,f as A,k as S,W as Ie,X as Oe,Y as D,e as N,o as v,c as _,F,g as G,n as se,a as d,t as E,u as y,Z as Ve,b as R,w as $,d as V,r as ae,h as Ne,_ as de,$ as je,i as Y,a0 as ne,a1 as xe,a2 as Be}from"./vue-router-3ca4787c.js";var Ue=!1;/*!
  * pinia v2.0.28
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let pe;const K=e=>pe=e,me=Symbol();function Z(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var H;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(H||(H={}));function jt(){const e=ie(!0),t=e.run(()=>w({}));let s=[],a=[];const n=q({install(r){K(n),n._a=r,r.provide(me,n),r.config.globalProperties.$pinia=n,a.forEach(o=>s.push(o)),a=[]},use(r){return!this._a&&!Ue?a.push(r):s.push(r),this},_p:s,_a:null,_e:e,_s:new Map,state:t});return n}const ve=()=>{};function re(e,t,s,a=ve){e.push(t);const n=()=>{const r=e.indexOf(t);r>-1&&(e.splice(r,1),a())};return!s&&Te()&&Ce(n),n}function I(e,...t){e.slice().forEach(s=>{s(...t)})}function ee(e,t){e instanceof Map&&t instanceof Map&&t.forEach((s,a)=>e.set(a,s)),e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const s in t){if(!t.hasOwnProperty(s))continue;const a=t[s],n=e[s];Z(n)&&Z(a)&&e.hasOwnProperty(s)&&!z(a)&&!te(a)?e[s]=ee(n,a):e[s]=a}return e}const De=Symbol();function He(e){return!Z(e)||!e.hasOwnProperty(De)}const{assign:C}=Object;function ze(e){return!!(z(e)&&e.effect)}function Ge(e,t,s,a){const{state:n,actions:r,getters:o}=t,c=s.state.value[e];let l;function i(){c||(s.state.value[e]=n?n():{});const u=fe(s.state.value[e]);return C(u,r,Object.keys(o||{}).reduce((g,p)=>(g[p]=q(A(()=>{K(s);const m=s._s.get(e);return o[p].call(m,m)})),g),{}))}return l=he(e,i,t,s,a,!0),l.$reset=function(){const g=n?n():{};this.$patch(p=>{C(p,g)})},l}function he(e,t,s={},a,n,r){let o;const c=C({actions:{}},s),l={deep:!0};let i,u,g=q([]),p=q([]),m;const P=a.state.value[e];!r&&!P&&(a.state.value[e]={}),w({});let M;function W(h){let f;i=u=!1,typeof h=="function"?(h(a.state.value[e]),f={type:H.patchFunction,storeId:e,events:m}):(ee(a.state.value[e],h),f={type:H.patchObject,payload:h,storeId:e,events:m});const L=M=Symbol();Fe().then(()=>{M===L&&(i=!0)}),u=!0,I(g,f,a.state.value[e])}const _e=ve;function ye(){o.stop(),g=[],p=[],a._s.delete(e)}function be(h,f){return function(){K(a);const L=Array.from(arguments),x=[],B=[];function we(b){x.push(b)}function ke(b){B.push(b)}I(p,{args:L,name:h,store:k,after:we,onError:ke});let U;try{U=f.apply(this&&this.$id===e?this:k,L)}catch(b){throw I(B,b),b}return U instanceof Promise?U.then(b=>(I(x,b),b)).catch(b=>(I(B,b),Promise.reject(b))):(I(x,U),U)}}const Ae={_p:a,$id:e,$onAction:re.bind(null,p),$patch:W,$reset:_e,$subscribe(h,f={}){const L=re(g,h,f.detached,()=>x()),x=o.run(()=>O(()=>a.state.value[e],B=>{(f.flush==="sync"?u:i)&&h({storeId:e,type:H.direct,events:m},B)},C({},l,f)));return L},$dispose:ye},k=$e(Ae);a._s.set(e,k);const j=a._e.run(()=>(o=ie(),o.run(()=>t())));for(const h in j){const f=j[h];if(z(f)&&!ze(f)||te(f))r||(P&&He(f)&&(z(f)?f.value=P[h]:ee(f,P[h])),a.state.value[e][h]=f);else if(typeof f=="function"){const L=be(h,f);j[h]=L,c.actions[h]=f}}return C(k,j),C(ue(k),j),Object.defineProperty(k,"$state",{get:()=>a.state.value[e],set:h=>{W(f=>{C(f,h)})}}),a._p.forEach(h=>{C(k,o.run(()=>h({store:k,app:a._a,pinia:a,options:c})))}),P&&r&&s.hydrate&&s.hydrate(k.$state,P),i=!0,u=!0,k}function Me(e,t,s){let a,n;const r=typeof t=="function";typeof e=="string"?(a=e,n=r?s:t):(n=e,a=e.id);function o(c,l){const i=Re();return c=c||i&&Le(me,null),c&&K(c),c=pe,c._s.has(a)||(r?he(a,t,n,c):Ge(a,n,c)),c._s.get(a)}return o.$id=a,o}function We(e){{e=ue(e);const t={};for(const s in e){const a=e[s];(z(a)||te(a))&&(t[s]=Ee(e,s))}return t}}class Je{constructor(t,s="localStorage"){Q(this,"key");Q(this,"storageType");this.key=t,this.storageType=s}get(){try{const t=window[this.storageType].getItem(this.key)??"";return JSON.parse(t)}catch{return null}}set(t){const s=JSON.stringify(t);window[this.storageType].setItem(this.key,s)}remove(){window[this.storageType].removeItem(this.key)}}const J=new Je("user"),oe=()=>!!J.get(),qe=Me("user",()=>{const e=w(J.get()),t=A(()=>e.value!==null);function s(a){a==null?(J.remove(),S.setSecurityData(null),e.value=null):(J.set(a),S.setSecurityData(a.token),e.value=a)}return{user:e,isAuthorized:t,updateUser:s}}),Ye="modulepreload",Ke=function(e){return"/vue3-realworld-example-app/"+e},ce={},T=function(t,s,a){if(!s||s.length===0)return t();const n=document.getElementsByTagName("link");return Promise.all(s.map(r=>{if(r=Ke(r),r in ce)return;ce[r]=!0;const o=r.endsWith(".css"),c=o?'[rel="stylesheet"]':"";if(!!a)for(let u=n.length-1;u>=0;u--){const g=n[u];if(g.href===r&&(!o||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${r}"]${c}`))return;const i=document.createElement("link");if(i.rel=o?"stylesheet":Ye,o||(i.as="script",i.crossOrigin=""),i.href=r,document.head.appendChild(i),o)return new Promise((u,g)=>{i.addEventListener("load",u),i.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${r}`)))})})).then(()=>t())};function ge(e){const t=w(!1);return{active:t,run:async(...a)=>{t.value=!0;try{return await e(...a)}catch(n){throw Ie(n)&&n.status===401?(await Ot("login"),new Error("Need to login first")):n}finally{t.value=!1}}}}function Qe(){const{articlesType:e,tag:t,username:s,metaChanged:a}=tt(),n=w([]),r=w(0),o=w(1);async function c(){n.value=[];let p=null;if(e.value==="my-feed"?p=S.articles.getArticlesFeed(D(o.value)).then(m=>m.data):e.value==="tag-feed"&&t.value?p=S.articles.getArticles({tag:t.value,...D(o.value)}).then(m=>m.data):e.value==="user-feed"&&s.value?p=S.articles.getArticles({author:s.value,...D(o.value)}).then(m=>m.data):e.value==="user-favorites-feed"&&s.value?p=S.articles.getArticles({favorited:s.value,...D(o.value)}).then(m=>m.data):e.value==="global-feed"&&(p=S.articles.getArticles(D(o.value)).then(m=>m.data)),p!==null){const m=await p;n.value=m.articles,r.value=m.articlesCount}else console.error(`Articles type "${e.value}" not supported`)}const l=p=>{o.value=p},i=(p,m)=>{n.value[p]=m},{active:u,run:g}=ge(c);return O(a,async()=>{o.value!==1?l(1):await g()}),O(o,g),{fetchArticles:g,articlesDownloading:u,articles:n,articlesCount:r,page:o,changePage:l,updateArticle:i,tag:t,username:s}}const Xe=["global-feed","my-feed","tag-feed","user-feed","user-favorites-feed"],Ze=e=>Xe.includes(e),et={"global-feed":"global-feed","my-feed":"my-feed",tag:"tag-feed",profile:"user-feed","profile-favorites":"user-favorites-feed"};function tt(){const e=Oe(),t=w(""),s=w(""),a=w("global-feed");return O(()=>e.name,n=>{const r=et[n];Ze(r)&&(a.value=r)},{immediate:!0}),O(()=>e.params.username,n=>{n!==s.value&&(s.value=typeof n=="string"?n:"")},{immediate:!0}),O(()=>e.params.tag,n=>{n!==t.value&&(t.value=typeof n=="string"?n:"")},{immediate:!0}),{tag:A(()=>t.value),username:A(()=>s.value),articlesType:A(()=>a.value),metaChanged:A(()=>`${a.value}-${s.value}-${t.value}`)}}const st={class:"pagination"},at=["aria-label","onClick"],nt=N({__name:"AppPagination",props:{page:null,count:null},emits:["page-change"],setup(e,{emit:t}){const s=e,{count:a,page:n}=fe(s),r=A(()=>Math.ceil(a.value/Ve)),o=l=>n.value===l,c=l=>t("page-change",l);return(l,i)=>(v(),_("ul",st,[(v(!0),_(F,null,G(y(r),u=>(v(),_("li",{key:u,class:se(["page-item",{active:o(u)}])},[d("a",{"aria-label":`Go to page ${u}`,class:"page-link",href:"javascript:",onClick:g=>c(u)},E(u),9,at)],2))),128))]))}}),rt=({isFavorited:e,articleSlug:t,onUpdate:s})=>{const a=async()=>{const c=await(e.value?S.articles.deleteArticleFavorite:S.articles.createArticleFavorite)(t.value).then(l=>l.data.article);s(c)},{active:n,run:r}=ge(a);return{favoriteProcessGoing:n,favoriteArticle:r}},ot={class:"article-preview"},ct={class:"article-meta"},lt=["src","alt"],it={class:"info"},ut={class:"date"},ft=["aria-label","disabled"],dt=d("i",{class:"ion-heart"},null,-1),pt=d("span",null,"Read more...",-1),mt={class:"tag-list"},vt=N({__name:"ArticlesListArticlePreview",props:{article:null},emits:["update"],setup(e,{emit:t}){const s=e,{favoriteProcessGoing:a,favoriteArticle:n}=rt({isFavorited:A(()=>s.article.favorited),articleSlug:A(()=>s.article.slug),onUpdate:r=>t("update",r)});return(r,o)=>{const c=ae("AppLink");return v(),_("div",ot,[d("div",ct,[R(c,{name:"profile",params:{username:s.article.author.username}},{default:$(()=>[d("img",{src:e.article.author.image,alt:s.article.author.username},null,8,lt)]),_:1},8,["params"]),d("div",it,[R(c,{name:"profile",params:{username:s.article.author.username},class:"author"},{default:$(()=>[V(E(e.article.author.username),1)]),_:1},8,["params"]),d("span",ut,E(new Date(e.article.createdAt).toDateString()),1)]),d("button",{"aria-label":e.article.favorited?"Unfavorite article":"Favorite article",class:se(["btn btn-sm pull-xs-right",[e.article.favorited?"btn-primary":"btn-outline-primary"]]),disabled:y(a),onClick:o[0]||(o[0]=()=>y(n)())},[dt,V(" "+E(e.article.favoritesCount),1)],10,ft)]),R(c,{name:"article",params:{slug:s.article.slug},class:"preview-link"},{default:$(()=>[d("h1",null,E(e.article.title),1),d("p",null,E(e.article.description),1),pt,d("ul",mt,[(v(!0),_(F,null,G(e.article.tagList,l=>(v(),_("li",{key:l,class:"tag-default tag-pill tag-outline"},E(l),1))),128))])]),_:1},8,["params"])])}}}),ht={class:"articles-toggle"},gt={class:"nav nav-pills outline-active"},_t=N({__name:"ArticlesListNavigation",props:{useGlobalFeed:{type:Boolean,default:!1},useMyFeed:{type:Boolean,default:!1},useTagFeed:{type:Boolean,default:!1},useUserFeed:{type:Boolean,default:!1},useUserFavorited:{type:Boolean,default:!1},tag:null,username:null},setup(e){const t=e,s=A(()=>[{name:"global-feed",routeName:"global-feed",title:"Global Feed"},{name:"my-feed",routeName:"my-feed",title:"Your Feed"},{name:"tag-feed",routeName:"tag",routeParams:{tag:t.tag},title:t.tag,icon:"ion-pound"},{name:"user-feed",routeName:"profile",routeParams:{username:t.username},title:"My articles"},{name:"user-favorites-feed",routeName:"profile-favorites",routeParams:{username:t.username},title:"Favorited Articles"}]),{isAuthorized:a}=We(qe()),n=A(()=>({"global-feed":t.useGlobalFeed,"my-feed":t.useMyFeed&&a.value,"tag-feed":t.useTagFeed&&t.tag!=="","user-feed":t.useUserFeed&&t.username!=="","user-favorites-feed":t.useUserFavorited&&t.username!==""})),r=A(()=>s.value.filter(o=>n.value[o.name]));return(o,c)=>{const l=ae("AppLink");return v(),_("div",ht,[d("ul",gt,[(v(!0),_(F,null,G(y(r),i=>(v(),_("li",{key:i.name,class:"nav-item"},[R(l,{class:"nav-link","active-class":"active",name:i.routeName,params:i.routeParams},{default:$(()=>[i.icon?(v(),_("i",{key:0,class:se(i.icon)},null,2)):Ne("",!0),V(" "+E(i.title),1)]),_:2},1032,["name","params"])]))),128))])])}}}),yt={key:0,class:"article-preview"},bt={key:1,class:"article-preview"},At=N({__name:"ArticlesList",async setup(e){let t,s;const{fetchArticles:a,articlesDownloading:n,articlesCount:r,articles:o,updateArticle:c,page:l,changePage:i,tag:u,username:g}=Qe();return[t,s]=de(()=>a()),await t,s(),(p,m)=>(v(),_(F,null,[R(_t,je(p.$attrs,{tag:y(u),username:y(g)}),null,16,["tag","username"]),y(n)?(v(),_("div",yt," Articles are downloading... ")):y(o).length===0?(v(),_("div",bt," No articles are here... yet. ")):(v(),_(F,{key:2},[(v(!0),_(F,null,G(y(o),(P,M)=>(v(),Y(vt,{key:P.slug,article:P,onUpdate:W=>y(c)(M,W)},null,8,["article","onUpdate"]))),128)),R(nt,{count:y(r),page:y(l),onPageChange:y(i)},null,8,["count","page","onPageChange"])],64))],64))}});function wt(){const e=w([]);async function t(){e.value=[],e.value=await S.tags.getTags().then(({data:s})=>s.tags)}return{fetchTags:t,tags:e}}const kt=d("p",null,"Popular Tags",-1),St={class:"tag-list"},Pt=N({__name:"PopularTags",async setup(e){let t,s;const{tags:a,fetchTags:n}=wt();return[t,s]=de(()=>n()),await t,s(),(r,o)=>{const c=ae("AppLink");return v(),_(F,null,[kt,d("div",St,[(v(!0),_(F,null,G(y(a),l=>(v(),Y(c,{key:l,name:"tag",params:{tag:l},class:"tag-pill tag-default"},{default:$(()=>[V(E(l),1)]),_:2},1032,["params"]))),128))])],64)}}}),Et={class:"home-page"},$t=d("div",{class:"banner"},[d("div",{class:"container"},[d("h1",{class:"logo-font"}," conduit "),d("p",null,"A place to share your knowledge.")])],-1),Lt={class:"container page"},Tt={class:"row"},Ct={class:"col-md-9"},Ft={class:"col-md-3"},Rt={class:"sidebar"},X=N({__name:"Home",setup(e){return(t,s)=>(v(),_("div",Et,[$t,d("div",Lt,[d("div",Tt,[d("div",Ct,[(v(),Y(ne,null,{fallback:$(()=>[V(" Articles are downloading... ")]),default:$(()=>[R(At,{"use-global-feed":"","use-my-feed":"","use-tag-feed":""})]),_:1}))]),d("div",Ft,[d("div",Rt,[(v(),Y(ne,null,{fallback:$(()=>[V(" Popular tags are downloading... ")]),default:$(()=>[R(Pt)]),_:1}))])])])])]))}}),It=[{name:"global-feed",path:"/",component:X},{name:"my-feed",path:"/my-feeds",component:X},{name:"tag",path:"/tag/:tag",component:X},{name:"article",path:"/article/:slug",component:()=>T(()=>import("./Article-7295674d.js"),["assets/Article-7295674d.js","assets/vue-router-3ca4787c.js","assets/useProfile-c9fa6670.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/runtime-dom.esm-bundler-171ea4b6.js","assets/Article-44850e62.css"])},{name:"edit-article",path:"/article/:slug/edit",component:()=>T(()=>import("./EditArticle-c1a42757.js"),["assets/EditArticle-c1a42757.js","assets/runtime-dom.esm-bundler-171ea4b6.js","assets/vue-router-3ca4787c.js"])},{name:"create-article",path:"/article/create",component:()=>T(()=>import("./EditArticle-c1a42757.js"),["assets/EditArticle-c1a42757.js","assets/runtime-dom.esm-bundler-171ea4b6.js","assets/vue-router-3ca4787c.js"])},{name:"login",path:"/login",component:()=>T(()=>import("./Login-5610ca2c.js"),["assets/Login-5610ca2c.js","assets/runtime-dom.esm-bundler-171ea4b6.js","assets/vue-router-3ca4787c.js"]),beforeEnter:()=>!oe()},{name:"register",path:"/register",component:()=>T(()=>import("./Register-6af9ec23.js"),["assets/Register-6af9ec23.js","assets/runtime-dom.esm-bundler-171ea4b6.js","assets/vue-router-3ca4787c.js"]),beforeEnter:()=>!oe()},{name:"profile",path:"/profile/:username",component:()=>T(()=>import("./Profile-20eefe6c.js"),["assets/Profile-20eefe6c.js","assets/useProfile-c9fa6670.js","assets/vue-router-3ca4787c.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/Profile-eb0c7730.css"])},{name:"profile-favorites",path:"/profile/:username/favorites",component:()=>T(()=>import("./Profile-20eefe6c.js"),["assets/Profile-20eefe6c.js","assets/useProfile-c9fa6670.js","assets/vue-router-3ca4787c.js","assets/_plugin-vue_export-helper-c27b6911.js","assets/Profile-eb0c7730.css"])},{name:"settings",path:"/settings",component:()=>T(()=>import("./Settings-54e21641.js"),["assets/Settings-54e21641.js","assets/runtime-dom.esm-bundler-171ea4b6.js","assets/vue-router-3ca4787c.js"])}],le=xe({history:Be(),routes:It});function Ot(e,t){return t!==void 0?le.push({name:e,params:t}):le.push({name:e})}export{At as _,J as a,rt as b,jt as c,Ot as d,ge as e,oe as i,le as r,We as s,qe as u};
