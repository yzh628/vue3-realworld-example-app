import{w as m,v as r,a as y}from"./runtime-dom.esm-bundler-171ea4b6.js";import{e as b,f as w,P as x,I as L,a6 as k,c,a as s,a5 as n,F as A,g as T,k as d,o as u,d as V,t as C,X as S,a7 as U}from"./vue-router-3ca4787c.js";const B={class:"editor-page"},E={class:"container page"},K={class:"row"},M={class:"col-md-10 offset-md-1 col-xs-12"},D=["onSubmit"],F={class:"form-group"},N={class:"form-group"},P={class:"form-group"},R={class:"form-group"},W=["onKeypress"],I={class:"tag-list"},X=["onClick"],$=["disabled"],H=b({__name:"EditArticle",setup(j){const f=S(),g=U(),l=w(()=>f.params.slug),t=x({title:"",description:"",body:"",tagList:[]}),i=L(""),p=()=>{t.tagList.push(i.value.trim()),i.value=""},_=a=>{t.tagList=t.tagList.filter(e=>e!==a)};async function h(a){const e=await d.articles.getArticle(a).then(o=>o.data.article);t.title=e.title,t.description=e.description,t.body=e.body,t.tagList=e.tagList}k(()=>{l.value&&h(l.value)});const v=async()=>{let a;return l.value?a=await d.articles.updateArticle(l.value,{article:t}).then(e=>e.data.article):a=await d.articles.createArticle({article:t}).then(e=>e.data.article),g.push({name:"article",params:{slug:a.slug}})};return(a,e)=>(u(),c("div",B,[s("div",E,[s("div",K,[s("div",M,[s("form",{onSubmit:m(v,["prevent"])},[s("fieldset",F,[n(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.title=o),type:"text",class:"form-control form-control-lg",placeholder:"Article Title"},null,512),[[r,t.title]])]),s("fieldset",N,[n(s("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>t.description=o),type:"text",class:"form-control form-control-lg",placeholder:"What's this article about?"},null,512),[[r,t.description]])]),s("fieldset",P,[n(s("textarea",{"onUpdate:modelValue":e[2]||(e[2]=o=>t.body=o),rows:8,class:"form-control",placeholder:"Write your article (in markdown)"},null,512),[[r,t.body]])]),s("fieldset",R,[n(s("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>i.value=o),type:"text",class:"form-control",placeholder:"Enter tags",onChange:p,onKeypress:y(m(p,["prevent"]),["enter"])},null,40,W),[[r,i.value]]),s("div",I,[(u(!0),c(A,null,T(t.tagList,o=>(u(),c("span",{key:o,class:"tag-default tag-pill"},[s("i",{class:"ion-close-round",onClick:q=>_(o)},null,8,X),V(" "+C(o),1)]))),128))])]),s("button",{class:"btn btn-lg pull-xs-right btn-primary",type:"submit",disabled:!(t.title&&t.description&&t.body)}," Publish Article ",8,$)],40,D)])])])]))}});export{H as default};
